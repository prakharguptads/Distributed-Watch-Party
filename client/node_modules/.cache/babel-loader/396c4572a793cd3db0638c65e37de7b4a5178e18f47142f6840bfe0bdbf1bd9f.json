{"ast":null,"code":"var _jsxFileName = \"/home/dell/Downloads/DD/Distributed-Watch-Party/client/src/components/Room/Player.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useContext, createRef } from 'react';\nimport styled from 'styled-components';\nimport YouTube from 'react-youtube';\nimport { SignalContext } from '../../contexts/SignalContext';\nfunction Player(props) {\n  _s();\n  let player = /*#__PURE__*/createRef();\n  const {\n    videoId,\n    socket\n  } = props;\n  const options = {\n    width: '100%',\n    height: '500px'\n  };\n  const {\n    dispatch: signalDispatch,\n    signalData\n  } = useContext(SignalContext);\n  const getCurrentPlayer = () => {\n    if (player.current) return player.current.getInternalPlayer();else return null;\n  };\n  const emitVideoState = (type, payload = {}, delayOffset = 0) => {\n    setTimeout(() => {\n      if (socket && !signalData.transition) {\n        console.log('Emitting video state', type);\n        socket.emit('videoStateChange', {\n          type,\n          payload\n        });\n      }\n    }, 500 + delayOffset);\n  };\n  const onVideoPlay = () => {\n    const player = getCurrentPlayer();\n    if (!player) return;\n    player.seekTo(signalData.playVideo || 0);\n    player.playVideo();\n  };\n  const onVideoPause = () => {\n    const player = getCurrentPlayer();\n    if (!player) return;\n    player.pauseVideo();\n    if (signalData.videoChanging) {\n      signalDispatch({\n        type: 'SET_TRANSITION',\n        transition: false\n      });\n      signalDispatch({\n        type: 'VIDEO_CHANGING',\n        videoChanging: false\n      });\n    }\n  };\n  const loadNewVideo = () => {\n    const player = getCurrentPlayer();\n    if (!player) return;\n    player.seekTo(0);\n    player.stopVideo();\n    signalDispatch({\n      type: 'SET_TRANSITION',\n      transition: false\n    });\n  };\n  useEffect(onVideoPlay, [signalData.playVideo]);\n  useEffect(onVideoPause, [signalData.pauseVideo]);\n  useEffect(loadNewVideo, [videoId]);\n  const onStateChange = e => {\n    const {\n      data\n    } = e;\n    const player = getCurrentPlayer();\n    if (!player) return;\n    switch (data) {\n      case -1:\n        console.log('Case -1 Video unstarted');\n        break;\n      case 0:\n        console.log('Case 0 Video Ended');\n        break;\n      case 1:\n        // PLAY\n        console.log('Case 1 Video Play');\n        signalDispatch({\n          type: 'SET_TRANSITION',\n          transition: false\n        });\n        player.playVideo();\n        emitVideoState('PLAY', {\n          currentTime: e.target.getCurrentTime()\n        }, 150);\n        break;\n      case 2:\n        // PAUSE\n        console.log('Case 2 Video paused');\n        emitVideoState('PAUSE');\n        signalDispatch({\n          type: 'SET_TRANSITION',\n          transition: false\n        });\n        break;\n      case 3:\n        console.log('Case 3 Bufferring');\n        break;\n      case 5:\n        console.log('Case 5 Video Cued');\n        signalDispatch({\n          type: 'SET_TRANSITION',\n          transition: false\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  return /*#__PURE__*/React.createElement(StyledPlayer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 3\n    }\n  }, videoId ? /*#__PURE__*/React.createElement(YouTube, {\n    videoId: videoId,\n    opts: options,\n    onStateChange: onStateChange,\n    ref: player,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }) : null);\n}\n_s(Player, \"uwFRWpGHX7YmUt6J89HI0joqzkc=\");\n_c = Player;\nconst StyledPlayer = styled.div`\n\tmargin-top: 30px;\n\tbackground-color: black;\n\twidth: 100%;\n\theight: 500px;\n`;\n_c2 = StyledPlayer;\nexport default Player;\nvar _c, _c2;\n$RefreshReg$(_c, \"Player\");\n$RefreshReg$(_c2, \"StyledPlayer\");","map":{"version":3,"names":["React","useEffect","useContext","createRef","styled","YouTube","SignalContext","Player","props","_s","player","videoId","socket","options","width","height","dispatch","signalDispatch","signalData","getCurrentPlayer","current","getInternalPlayer","emitVideoState","type","payload","delayOffset","setTimeout","transition","console","log","emit","onVideoPlay","seekTo","playVideo","onVideoPause","pauseVideo","videoChanging","loadNewVideo","stopVideo","onStateChange","e","data","currentTime","target","getCurrentTime","createElement","StyledPlayer","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","opts","ref","_c","div","_c2","$RefreshReg$"],"sources":["/home/dell/Downloads/DD/Distributed-Watch-Party/client/src/components/Room/Player.js"],"sourcesContent":["import React, { useEffect, useContext, createRef } from 'react';\nimport styled from 'styled-components';\nimport YouTube from 'react-youtube';\nimport { SignalContext } from '../../contexts/SignalContext';\n\nfunction Player(props) {\n\tlet player = createRef();\n\tconst { videoId, socket } = props;\n\tconst options = {\n\t\twidth: '100%',\n\t\theight: '500px',\n\t};\n\tconst { dispatch: signalDispatch, signalData } = useContext(SignalContext);\n\n\tconst getCurrentPlayer = () => {\n\t\tif (player.current) return player.current.getInternalPlayer();\n\t\telse return null;\n\t};\n\n\tconst emitVideoState = (type, payload = {}, delayOffset = 0) => {\n\t\tsetTimeout(() => {\n\t\t\tif (socket && !signalData.transition) {\n\t\t\t\tconsole.log('Emitting video state', type);\n\t\t\t\tsocket.emit('videoStateChange', { type, payload });\n\t\t\t}\n\t\t}, 500 + delayOffset);\n\t};\n\n\tconst onVideoPlay = () => {\n\t\tconst player = getCurrentPlayer();\n\t\tif (!player) return;\n\t\tplayer.seekTo(signalData.playVideo || 0);\n\t\tplayer.playVideo();\n\t};\n\n\tconst onVideoPause = () => {\n\t\tconst player = getCurrentPlayer();\n\t\tif (!player) return;\n\n\t\tplayer.pauseVideo();\n\t\tif (signalData.videoChanging) {\n\t\t\tsignalDispatch({ type: 'SET_TRANSITION', transition: false });\n\t\t\tsignalDispatch({\n\t\t\t\ttype: 'VIDEO_CHANGING',\n\t\t\t\tvideoChanging: false,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst loadNewVideo = () => {\n\t\tconst player = getCurrentPlayer();\n\t\tif (!player) return;\n\n\t\tplayer.seekTo(0);\n\t\tplayer.stopVideo();\n\t\tsignalDispatch({ type: 'SET_TRANSITION', transition: false });\n\t};\n\n\tuseEffect(onVideoPlay, [signalData.playVideo]);\n\tuseEffect(onVideoPause, [signalData.pauseVideo]);\n\tuseEffect(loadNewVideo, [videoId]);\n\n\tconst onStateChange = (e) => {\n\t\tconst { data } = e;\n\t\tconst player = getCurrentPlayer();\n\t\tif (!player) return;\n\n\t\tswitch (data) {\n\t\t\tcase -1:\n\t\t\t\tconsole.log('Case -1 Video unstarted');\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\tconsole.log('Case 0 Video Ended');\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// PLAY\n\t\t\t\tconsole.log('Case 1 Video Play');\n\t\t\t\tsignalDispatch({ type: 'SET_TRANSITION', transition: false });\n\t\t\t\tplayer.playVideo();\n\n\t\t\t\temitVideoState(\n\t\t\t\t\t'PLAY',\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrentTime: e.target.getCurrentTime(),\n\t\t\t\t\t},\n\t\t\t\t\t150\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t// PAUSE\n\t\t\t\tconsole.log('Case 2 Video paused');\n\t\t\t\temitVideoState('PAUSE');\n\t\t\t\tsignalDispatch({ type: 'SET_TRANSITION', transition: false });\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\tconsole.log('Case 3 Bufferring');\n\t\t\t\tbreak;\n\n\t\t\tcase 5:\n\t\t\t\tconsole.log('Case 5 Video Cued');\n\t\t\t\tsignalDispatch({ type: 'SET_TRANSITION', transition: false });\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledPlayer>\n\t\t\t{videoId ? (\n\t\t\t\t<YouTube\n\t\t\t\t\tvideoId={videoId}\n\t\t\t\t\topts={options}\n\t\t\t\t\tonStateChange={onStateChange}\n\t\t\t\t\tref={player}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</StyledPlayer>\n\t);\n}\n\nconst StyledPlayer = styled.div`\n\tmargin-top: 30px;\n\tbackground-color: black;\n\twidth: 100%;\n\theight: 500px;\n`;\n\nexport default Player;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}