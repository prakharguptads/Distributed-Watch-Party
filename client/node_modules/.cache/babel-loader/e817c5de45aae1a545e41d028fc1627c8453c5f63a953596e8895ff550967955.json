{"ast":null,"code":"var _jsxFileName = \"/home/dell/Downloads/DD/Distributed-Watch-Party/client/src/components/Room/Chat/Messages.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, createRef } from 'react';\nimport styled from 'styled-components';\nfunction Messages(props) {\n  _s();\n  let messageEnd = /*#__PURE__*/createRef();\n  let messagesContainer = /*#__PURE__*/createRef();\n  const {\n    messages\n  } = props;\n  const scrollToBottom = () => {\n    if (!messagesContainer.current || !messageEnd.current) return;\n    const {\n      clientHeight,\n      scrollTop,\n      scrollHeight\n    } = messagesContainer.current;\n\n    // totalMessage >= 1 always, because we have a dummy div as a permanent children\n    const totalMessage = messagesContainer.current.children.length;\n    const newMessage = messagesContainer.current.children[totalMessage - 2];\n    const lastMessage = totalMessage > 2 ? messagesContainer.current.children[totalMessage - 3] : null;\n    if (!newMessage || !lastMessage) return;\n    const newMessageHeight = newMessage.clientHeight;\n    const lastMessageHeight = lastMessage.clientHeight;\n\n    // -15 for error margin\n    if (clientHeight + scrollTop + newMessageHeight + lastMessageHeight >= scrollHeight - 15) {\n      messageEnd.current.scrollIntoView();\n    }\n  };\n  useEffect(scrollToBottom, [messages]);\n  return /*#__PURE__*/React.createElement(MessagesContainer, {\n    ref: messagesContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 3\n    }\n  }, messages.map(message => /*#__PURE__*/React.createElement(Message, {\n    user: message.from,\n    key: message.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, message.text)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dummy\",\n    ref: messageEnd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }\n  }));\n}\n_s(Messages, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Messages;\nconst Message = props => {\n  return props.user !== null ? /*#__PURE__*/React.createElement(MessageContainer, {\n    className: props.className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(User, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }\n  }, props.user), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }\n  }, props.children)) : /*#__PURE__*/React.createElement(MessageContainer, {\n    adminMessage: true,\n    className: props.className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    adminMessage: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }\n  }, props.children));\n};\n_c2 = Message;\nconst MessagesContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tpadding: 5px;\n\tbox-sizing: border-box;\n\toverflow-y: auto;\n`;\n_c3 = MessagesContainer;\nconst MessageContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: 0.9em;\n\tmargin-bottom: 10px;\n\tbox-sizing: border-box;\n\n\t${({\n  adminMessage\n}) => adminMessage && {\n  'text-align': 'center',\n  color: 'gray'\n}}\n`;\n_c4 = MessageContainer;\nconst User = styled.div`\n\tfont-weight: 500;\n\tfont-size: 0.85em;\n\tmargin-bottom: 3px;\n\tmargin-left: 8px;\n`;\n_c5 = User;\nconst Text = styled.div`\n\tpadding: 8px 10px;\n\tfont-weight: 500;\n\tfont-size: 0.9em;\n\tbackground-color: ${props => props.adminMessage ? 'transparent' : '#eee'};\n\twidth: ${props => props.adminMessage ? 'auto' : '80%'};\n\tborder-radius: 15px;\n`;\n_c6 = Text;\nexport default Messages;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Messages\");\n$RefreshReg$(_c2, \"Message\");\n$RefreshReg$(_c3, \"MessagesContainer\");\n$RefreshReg$(_c4, \"MessageContainer\");\n$RefreshReg$(_c5, \"User\");\n$RefreshReg$(_c6, \"Text\");","map":{"version":3,"names":["React","useEffect","createRef","styled","Messages","props","_s","messageEnd","messagesContainer","messages","scrollToBottom","current","clientHeight","scrollTop","scrollHeight","totalMessage","children","length","newMessage","lastMessage","newMessageHeight","lastMessageHeight","scrollIntoView","createElement","MessagesContainer","ref","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","message","Message","user","from","key","id","text","className","_c","MessageContainer","User","Text","adminMessage","_c2","div","_c3","color","_c4","_c5","_c6","$RefreshReg$"],"sources":["/home/dell/Downloads/DD/Distributed-Watch-Party/client/src/components/Room/Chat/Messages.js"],"sourcesContent":["import React, { useEffect, createRef } from 'react';\nimport styled from 'styled-components';\n\nfunction Messages(props) {\n\tlet messageEnd = createRef();\n\tlet messagesContainer = createRef();\n\tconst { messages } = props;\n\n\tconst scrollToBottom = () => {\n\t\tif (!messagesContainer.current || !messageEnd.current) return;\n\n\t\tconst {\n\t\t\tclientHeight,\n\t\t\tscrollTop,\n\t\t\tscrollHeight,\n\t\t} = messagesContainer.current;\n\n\t\t// totalMessage >= 1 always, because we have a dummy div as a permanent children\n\t\tconst totalMessage = messagesContainer.current.children.length;\n\n\t\tconst newMessage = messagesContainer.current.children[totalMessage - 2];\n\t\tconst lastMessage =\n\t\t\ttotalMessage > 2\n\t\t\t\t? messagesContainer.current.children[totalMessage - 3]\n\t\t\t\t: null;\n\n\t\tif (!newMessage || !lastMessage) return;\n\n\t\tconst newMessageHeight = newMessage.clientHeight;\n\t\tconst lastMessageHeight = lastMessage.clientHeight;\n\n\t\t// -15 for error margin\n\t\tif (\n\t\t\tclientHeight + scrollTop + newMessageHeight + lastMessageHeight >=\n\t\t\tscrollHeight - 15\n\t\t) {\n\t\t\tmessageEnd.current.scrollIntoView();\n\t\t}\n\t};\n\n\tuseEffect(scrollToBottom, [messages]);\n\n\treturn (\n\t\t<MessagesContainer ref={messagesContainer}>\n\t\t\t{messages.map((message) => (\n\t\t\t\t<Message user={message.from} key={message.id}>\n\t\t\t\t\t{message.text}\n\t\t\t\t</Message>\n\t\t\t))}\n\t\t\t<div className='dummy' ref={messageEnd}></div>\n\t\t</MessagesContainer>\n\t);\n}\n\nconst Message = (props) => {\n\treturn props.user !== null ? (\n\t\t<MessageContainer className={props.className}>\n\t\t\t<User>{props.user}</User>\n\t\t\t<Text>{props.children}</Text>\n\t\t</MessageContainer>\n\t) : (\n\t\t<MessageContainer adminMessage className={props.className}>\n\t\t\t<Text adminMessage>{props.children}</Text>\n\t\t</MessageContainer>\n\t);\n};\n\nconst MessagesContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tpadding: 5px;\n\tbox-sizing: border-box;\n\toverflow-y: auto;\n`;\n\nconst MessageContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: 0.9em;\n\tmargin-bottom: 10px;\n\tbox-sizing: border-box;\n\n\t${({ adminMessage }) =>\n\t\tadminMessage && { 'text-align': 'center', color: 'gray' }}\n`;\n\nconst User = styled.div`\n\tfont-weight: 500;\n\tfont-size: 0.85em;\n\tmargin-bottom: 3px;\n\tmargin-left: 8px;\n`;\n\nconst Text = styled.div`\n\tpadding: 8px 10px;\n\tfont-weight: 500;\n\tfont-size: 0.9em;\n\tbackground-color: ${(props) =>\n\t\tprops.adminMessage ? 'transparent' : '#eee'};\n\twidth: ${(props) => (props.adminMessage ? 'auto' : '80%')};\n\tborder-radius: 15px;\n`;\n\nexport default Messages;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,SAAS,QAAQ,OAAO;AACnD,OAAOC,MAAM,MAAM,mBAAmB;AAEtC,SAASC,QAAQA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACxB,IAAIC,UAAU,gBAAGL,SAAS,CAAC,CAAC;EAC5B,IAAIM,iBAAiB,gBAAGN,SAAS,CAAC,CAAC;EACnC,MAAM;IAAEO;EAAS,CAAC,GAAGJ,KAAK;EAE1B,MAAMK,cAAc,GAAGA,CAAA,KAAM;IAC5B,IAAI,CAACF,iBAAiB,CAACG,OAAO,IAAI,CAACJ,UAAU,CAACI,OAAO,EAAE;IAEvD,MAAM;MACLC,YAAY;MACZC,SAAS;MACTC;IACD,CAAC,GAAGN,iBAAiB,CAACG,OAAO;;IAE7B;IACA,MAAMI,YAAY,GAAGP,iBAAiB,CAACG,OAAO,CAACK,QAAQ,CAACC,MAAM;IAE9D,MAAMC,UAAU,GAAGV,iBAAiB,CAACG,OAAO,CAACK,QAAQ,CAACD,YAAY,GAAG,CAAC,CAAC;IACvE,MAAMI,WAAW,GAChBJ,YAAY,GAAG,CAAC,GACbP,iBAAiB,CAACG,OAAO,CAACK,QAAQ,CAACD,YAAY,GAAG,CAAC,CAAC,GACpD,IAAI;IAER,IAAI,CAACG,UAAU,IAAI,CAACC,WAAW,EAAE;IAEjC,MAAMC,gBAAgB,GAAGF,UAAU,CAACN,YAAY;IAChD,MAAMS,iBAAiB,GAAGF,WAAW,CAACP,YAAY;;IAElD;IACA,IACCA,YAAY,GAAGC,SAAS,GAAGO,gBAAgB,GAAGC,iBAAiB,IAC/DP,YAAY,GAAG,EAAE,EAChB;MACDP,UAAU,CAACI,OAAO,CAACW,cAAc,CAAC,CAAC;IACpC;EACD,CAAC;EAEDrB,SAAS,CAACS,cAAc,EAAE,CAACD,QAAQ,CAAC,CAAC;EAErC,oBACCT,KAAA,CAAAuB,aAAA,CAACC,iBAAiB;IAACC,GAAG,EAAEjB,iBAAkB;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACxCtB,QAAQ,CAACuB,GAAG,CAAEC,OAAO,iBACrBjC,KAAA,CAAAuB,aAAA,CAACW,OAAO;IAACC,IAAI,EAAEF,OAAO,CAACG,IAAK;IAACC,GAAG,EAAEJ,OAAO,CAACK,EAAG;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC3CE,OAAO,CAACM,IACD,CACT,CAAC,eACFvC,KAAA,CAAAuB,aAAA;IAAKiB,SAAS,EAAC,OAAO;IAACf,GAAG,EAAElB,UAAW;IAAAmB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAM,CAC3B,CAAC;AAEtB;AAACzB,EAAA,CAjDQF,QAAQ;AAAAqC,EAAA,GAARrC,QAAQ;AAmDjB,MAAM8B,OAAO,GAAI7B,KAAK,IAAK;EAC1B,OAAOA,KAAK,CAAC8B,IAAI,KAAK,IAAI,gBACzBnC,KAAA,CAAAuB,aAAA,CAACmB,gBAAgB;IAACF,SAAS,EAAEnC,KAAK,CAACmC,SAAU;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC5C/B,KAAA,CAAAuB,aAAA,CAACoB,IAAI;IAAAjB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE1B,KAAK,CAAC8B,IAAW,CAAC,eACzBnC,KAAA,CAAAuB,aAAA,CAACqB,IAAI;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE1B,KAAK,CAACW,QAAe,CACX,CAAC,gBAEnBhB,KAAA,CAAAuB,aAAA,CAACmB,gBAAgB;IAACG,YAAY;IAACL,SAAS,EAAEnC,KAAK,CAACmC,SAAU;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzD/B,KAAA,CAAAuB,aAAA,CAACqB,IAAI;IAACC,YAAY;IAAAnB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE1B,KAAK,CAACW,QAAe,CACxB,CAClB;AACF,CAAC;AAAC8B,GAAA,GAXIZ,OAAO;AAab,MAAMV,iBAAiB,GAAGrB,MAAM,CAAC4C,GAAI;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAPIxB,iBAAiB;AASvB,MAAMkB,gBAAgB,GAAGvC,MAAM,CAAC4C,GAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;EAAEF;AAAa,CAAC,KAClBA,YAAY,IAAI;EAAE,YAAY,EAAE,QAAQ;EAAEI,KAAK,EAAE;AAAO,CAAE;AAC5D,CAAC;AAACC,GAAA,GATIR,gBAAgB;AAWtB,MAAMC,IAAI,GAAGxC,MAAM,CAAC4C,GAAI;AACxB;AACA;AACA;AACA;AACA,CAAC;AAACI,GAAA,GALIR,IAAI;AAOV,MAAMC,IAAI,GAAGzC,MAAM,CAAC4C,GAAI;AACxB;AACA;AACA;AACA,qBAAsB1C,KAAK,IACzBA,KAAK,CAACwC,YAAY,GAAG,aAAa,GAAG,MAAO;AAC9C,UAAWxC,KAAK,IAAMA,KAAK,CAACwC,YAAY,GAAG,MAAM,GAAG,KAAO;AAC3D;AACA,CAAC;AAACO,GAAA,GARIR,IAAI;AAUV,eAAexC,QAAQ;AAAC,IAAAqC,EAAA,EAAAK,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAC,GAAA,EAAAC,GAAA;AAAAC,YAAA,CAAAZ,EAAA;AAAAY,YAAA,CAAAP,GAAA;AAAAO,YAAA,CAAAL,GAAA;AAAAK,YAAA,CAAAH,GAAA;AAAAG,YAAA,CAAAF,GAAA;AAAAE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}